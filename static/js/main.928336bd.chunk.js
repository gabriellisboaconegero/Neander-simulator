(this.webpackJsonpneander=this.webpackJsonpneander||[]).push([[0],{20:function(e,n,t){"use strict";t.r(n);var c,r,a,i=t(1),o=t.n(i),l=t(9),s=t.n(l),u=t(2),d=t(3),j=t(4),b=Object(j.a)(c||(c=Object(d.a)(["\n  *{\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n\n  body{\n    background: #EBEBEB;\n    color: #363636;\n  }\n\n  button{\n    padding: 4px 10px;\n    cursor: pointer;\n    border: 1px solid #363636;\n    border-radius: 2px;\n\n    &:hover{\n      background-color: #D6D6D6;\n    }\n  }\n"]))),p=j.c.div(r||(r=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  width: 100vw;\n  height: 100vh;\n\n  padding: 40px 0;\n\n  h1{\n    padding: 20px;\n  }\n  /* gap: 16px; */\n"]))),f=t(0);!function(e){e[e.BINARY=0]="BINARY",e[e.UNARY=1]="UNARY",e[e.ADDR=2]="ADDR"}(a||(a={}));var x,O,h,v,g,m,y,N,A,w,k={0:{op:"NOP",op_type:a.UNARY},16:{op:"STA",op_type:a.BINARY},32:{op:"LDA",op_type:a.BINARY},48:{op:"ADD",op_type:a.BINARY},64:{op:"OR",op_type:a.BINARY},80:{op:"AND",op_type:a.BINARY},96:{op:"NOT",op_type:a.UNARY},128:{op:"JMP",op_type:a.BINARY},144:{op:"JN",op_type:a.BINARY},160:{op:"JZ",op_type:a.BINARY},240:{op:"HLT",op_type:a.UNARY}},R=Object(i.createContext)({}),D=function(e){var n=e.children,t=Object(i.useState)(0),c=Object(u.a)(t,2),r=c[0],o=c[1],l=Object(i.useState)(0),s=Object(u.a)(l,2),d=s[0],j=s[1],b=Object(i.useState)((function(){for(var e=new Array(256),n=0;n<e.length;n++)e[n]={value:0,type:a.UNARY};return e})),x=Object(u.a)(b,2),O=x[0],h=x[1],v=Object(i.useState)(L(d)<0),g=Object(u.a)(v,2),m=g[0],y=g[1],N=Object(i.useState)(0===d),A=Object(u.a)(N,2),w=A[0],D=A[1],C=Object(i.useState)(!0),S=Object(u.a)(C,2),_=S[0],Y=S[1],B=Object(i.useState)(300),I=Object(u.a)(B,2),P=I[0],U=(I[1],Object(i.useState)(0)),M=Object(u.a)(U,2),E=M[0],J=M[1];function L(e){return e>=128?-(O.length-e):e}function T(e){if("number"===typeof e)e=F(e),j(e);else{var n=e;j((function(e){return F(n(F(e)))}))}}function Z(){var e,n=r,t=O[n],c=k[O[n].value>>4<<4]||k[0],i=O[n+1];switch(t.type===a.BINARY?n+=2:n+=1,J((function(e){return e+1})),c.op){case"NOP":console.log("N\xe3o fez nada");break;case"STA":H(i.value,d);break;case"LDA":z(i.value);break;case"ADD":!function(e){T((function(n){return n+O[e].value}))}(i.value);break;case"OR":e=i.value,T((function(n){return n|e}));break;case"AND":!function(e){T((function(n){return n&e}))}(i.value);break;case"NOT":T((function(e){return~e}));break;case"JMP":n=i.value;break;case"JN":m&&(n=i.value);break;case"JZ":w&&(n=i.value);break;case"HLT":Y(!0)}r<O.length&&o(n)}function z(e){T(O[e].value)}function F(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return n=Math.pow(2,n),e<0&&(e=n+e),e&n-1}function V(e,n,t){t[e].value=n;for(var c=e;c<t.length;c++){var r=k[t[c].value>>4<<4]||k[0];if(0===c)t[c].type=r.op_type;else t[c-1].type===a.BINARY?t[c].type=a.ADDR:t[c].type=r.op_type;if(t[c].type!==a.BINARY&&c!==e)break}return t}function H(e,n){n=F(n),e=F(e),h((function(t){return V(e,n,t)}))}Object(i.useEffect)((function(){y(L(d)<0),D(0===d)}),[d]),Object(i.useEffect)((function(){!_&&r<O.length&&E<=P?(Z(),console.log("Dando um passo",E)):(r>=O.length||E>P)&&Y(!0)}),[_,r]);var K={ac:d,flagN:m,flagZ:w,memory:O,pc:r,colocarSinal:L,op_load:z,step:Z,setNewAc:function(e){T(e)},changeMemoryType:function(e,n){O[e].type=n},updateMem:H,zerarPc:function(){o(0)},run:function(){Y(!1)},bitComplement:F,downloadMem:function(){var e="";O.forEach((function(n,t){var c=n.value,r=n.type,i=(k[c>>4<<4]||k[0]).op;t<O.length-1&&(r===a.ADDR?i="":r===a.BINARY&&(i+=" ".concat(O[t+1].value))),e+="".concat(t,":").concat(c," ").concat(i,"\n")}));var n=new Blob([e],{type:"text"}),t=URL.createObjectURL(n),c=document.createElement("a");c.href=t,c.download="neander_mem.txt",document.body.appendChild(c),c.click(),setTimeout((function(){URL.revokeObjectURL(t),document.body.removeChild(c)}),0)},shiftMem:function(e,n){e!==O.length-1&&O[e].type!==a.BINARY&&h((function(n){var t=n.map((function(e){return e}));t[e+1]={value:0,type:a.UNARY};for(var c=e+2;c<O.length;c++)t[c]=n[c-1];return V(0,t[0].value,t)}))}};return Object(f.jsx)(R.Provider,{value:K,children:Object(f.jsx)(p,{children:n})})},C=function(){return Object(i.useContext)(R)};function S(){return function(e){var n=e.nativeEvent,t=parseInt(e.target.value);if("input"===n.type){if(null===n.data||"-"===n.data)return!0;if(!isNaN(t)&&!isNaN(parseInt(n.data)))return!0}return!1}}var _=j.c.main(x||(x=Object(d.a)(["\n  display: flex;\n  /* align-items: flex-start; */\n  align-content: flex-start;\n  justify-content: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  gap: 10px;\n  flex-wrap: wrap;\n  padding: 0 24px;\n\n  & > *{\n    flex: 3;\n    flex-basis: 50%;\n    align-self: center;\n  }\n"]))),Y=j.c.ul(O||(O=Object(d.a)(["\n  flex: 1;\n  width: 350px;\n  border: 5px solid #363636;\n  border-radius: 16px;\n\n  list-style: none;\n  padding: 8px;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n\n  li{\n    flex: 1;\n    flex-basis: 25%;\n    text-align: center;\n    padding: 5px 0;\n  }\n"]))),B=j.c.div(h||(h=Object(d.a)(["\n  width: 60%;\n  max-width: 300px;\n  fieldset{\n    padding: 10px 16px;\n  }\n"]))),I=j.c.fieldset(v||(v=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n"]))),P=Object(j.c)(I)(g||(g=Object(d.a)(["\n  .acValues{\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 16px;\n\n    button{\n      align-self: flex-end;\n      padding: 4px 10px;\n      cursor: pointer;\n    }\n  }\n\n  .setAc{\n    input{\n      margin-right: 16px;\n    }\n  }\n"]))),U="\n  font-size: 20px;\n  font-weight: 600;\n",M=Object(j.c)(I)(m||(m=Object(d.a)(["\n  flex-direction: row;\n  gap: 12px;\n  justify-content: space-evenly;\n\n  span{\n    width: 60px;\n    aspect-ratio: 1;\n    text-align: center;\n    line-height: 60px;\n    color: white;\n    background-color: red;\n\n    border-radius: 50%;\n    border: 3px inset #363636;\n    ","\n\n    &.active{\n      background-color: green;\n    }\n  }\n"])),U),E=Object(j.c)(I)(y||(y=Object(d.a)(["\n  flex-direction: row;\n  justify-content: flex-start;\n  gap: 12px;\n"]))),J=j.c.span(N||(N=Object(d.a)(["\n  ","\n  padding: 14px;\n  border: 2px groove threedface;\n"])),U),L=j.c.div(A||(A=Object(d.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  justify-content: center;\n  width: 600px;\n  height: 100%;\n\n  form, .just_see{\n    flex: 1;\n    flex-basis: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n  }\n\n  .just_see{\n    flex-basis: 40%;\n  }\n"]))),T=j.c.table(w||(w=Object(d.a)(["\n  display: block;\n  /* flex: 1; */\n  flex-basis: 70%;\n  /* align-self: stretch; */\n  height: 350px;\n  overflow: auto;\n"]))),Z=function(){var e,n=C(),t=n.pc,c=n.ac,r=n.colocarSinal,a=n.flagN,o=n.flagZ,l=n.step,s=n.setNewAc,d=n.zerarPc,j=n.run,b=n.downloadMem,p=Object(i.useState)(""),x=Object(u.a)(p,2),O=x[0],h=x[1],v=S();return Object(f.jsxs)(B,{children:[Object(f.jsxs)(P,{children:[Object(f.jsx)("legend",{children:"AC:"}),Object(f.jsxs)("div",{className:"acValues",children:[Object(f.jsx)(J,{children:c}),Object(f.jsx)("button",{onClick:function(e){return s(0)},children:"Zerar"}),Object(f.jsx)(J,{children:r(c)})]}),Object(f.jsxs)("form",{className:"setAc",onSubmit:function(e){e.preventDefault(),s(parseInt(O)||0),h("")},children:[Object(f.jsx)("input",{type:"text",name:"set_ac",id:"set_ac",placeholder:"New AC value",autoComplete:"off",value:O,onFocus:function(e){return e.target.select()},onChange:function(e){v(e)&&h(e.target.value)}}),Object(f.jsx)("button",{type:"submit",children:"Set"})]})]}),Object(f.jsxs)(I,{children:[Object(f.jsx)("legend",{children:"PC:"}),Object(f.jsx)(J,{children:(e=t,e.toString().padStart(3,"0"))}),Object(f.jsx)("button",{onClick:function(e){return d()},children:"Zerar"})]}),Object(f.jsxs)(M,{children:[Object(f.jsx)("legend",{children:"Flags:"}),Object(f.jsx)("span",{className:"".concat(a?"active":""),children:"N"}),Object(f.jsx)("span",{className:"".concat(o?"active":""),children:"Z"})]}),Object(f.jsxs)(E,{children:[Object(f.jsx)("legend",{children:"Controls:"}),Object(f.jsx)("button",{onClick:function(e){return l()},children:"Step"}),Object(f.jsx)("button",{onClick:function(e){return j()},children:"Run"}),Object(f.jsx)("button",{onClick:function(e){return b()},children:"Download .txt file"})]})]})},z=function(){return Object(f.jsx)(Y,{children:Object.entries(k).map((function(e,n){var t=Object(u.a)(e,2),c=t[0],r=t[1];return Object(f.jsxs)("li",{children:[Object(f.jsx)("strong",{children:r.op}),": ",c]},"instruction_map_item_".concat(n))}))})};var F,V,H=function(){var e=C().memory;return function(n){return k[e[n].value>>4<<4]||k[0]}},K=j.c.tr(F||(F=Object(d.a)(["\n  ","\n"])),(function(e){if(e.selecting)return Object(j.b)(V||(V=Object(d.a)(["\n        background-color: lightblue;\n      "])))})),q=function(e){var n=e.addr,t=e.mem_data,c=e.showOP,r=e.showP,i=e.selected,o=e.selecting,l=e.onClick,s=H(),u=C(),d=u.pc,j=u.memory;return Object(f.jsxs)(K,{onClick:l,selecting:!(!i||!o),children:[r&&Object(f.jsx)("td",{children:d===n&&">"}),Object(f.jsx)("td",{children:n}),Object(f.jsx)("td",{children:t.value}),c&&Object(f.jsx)("td",{children:t.type===a.ADDR?"":Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("span",{children:[s(n).op," \xa0"]}),t.type===a.BINARY&&n<j.length&&Object(f.jsx)("span",{children:j[n+1].value})]})})]})},G=function(e){var n=e.showOP,t=e.showP,c=e.selecting,r=e.selected,a=e.onClick,i=C().memory;return Object(f.jsxs)(T,{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[t&&Object(f.jsx)("th",{children:"P"}),Object(f.jsx)("th",{children:"Address"}),Object(f.jsx)("th",{children:"Data"}),n&&Object(f.jsx)("th",{children:"Operation"})]})}),Object(f.jsx)("tbody",{children:i.map((function(e,i){return Object(f.jsx)(q,{mem_data:e,addr:i,selected:r===i,selecting:c,showP:t,showOP:n,onClick:function(e){return null===a||void 0===a?void 0:a(i)}},"".concat(i,"_").concat(e.value))}))})]})},Q=function(){var e=C(),n=e.memory,t=e.updateMem,c=e.shiftMem,r=Object(i.useState)(""),a=Object(u.a)(r,2),o=a[0],l=a[1],s=Object(i.useState)(!1),d=Object(u.a)(s,2),j=d[0],b=d[1],p=Object(i.useState)(0),x=Object(u.a)(p,2),O=x[0],h=x[1],v=S(),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,n=C().bitComplement;return function(t){return n(t,e)}}();function m(e){var t,c;h(e),l(String(n[e].value)),null===(t=y.current)||void 0===t||t.focus(),null===(c=y.current)||void 0===c||c.select(),j||b(!0)}Object(i.useEffect)((function(){var e,n;null===(e=y.current)||void 0===e||e.focus(),null===(n=y.current)||void 0===n||n.select()}),[O]);var y=Object(i.useRef)(null);return Object(f.jsxs)(L,{children:[Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m(O+1),t(O,parseInt(o)||0)},children:[Object(f.jsx)(G,{selected:O,selecting:j,showOP:!0,showP:!0,onClick:m}),Object(f.jsx)("input",{onBlur:function(e){b(!1)},onKeyDown:function(e){switch(e.key){case"ArrowDown":m(g(O+1)),e.preventDefault();break;case"ArrowUp":m(g(O-1)),e.preventDefault()}},ref:y,name:"teste2",id:"teste2",value:o,onChange:function(e){v(e)&&l(e.target.value)},type:"text",placeholder:"Instruction number",autoComplete:"off",onFocus:function(e){return e.target.select()},onClick:function(e){return m(O)}}),Object(f.jsx)("button",{type:"button",onClick:function(e){return c(O,1)},children:"Add mem line"}),Object(f.jsx)("button",{type:"submit",children:"Set mem"})]}),Object(f.jsx)("div",{className:"just_see",children:Object(f.jsx)(G,{selected:O,selecting:j,onClick:m})})]})},W=function(){return Object(f.jsxs)(D,{children:[Object(f.jsx)(b,{}),Object(f.jsxs)("h1",{children:["Neander Simulator Version ","0.0.2"]}),Object(f.jsxs)(_,{children:[Object(f.jsx)(z,{}),Object(f.jsx)(Z,{}),Object(f.jsx)(Q,{})]})]})};s.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(W,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.928336bd.chunk.js.map